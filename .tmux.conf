# ~/.tmux.conf

# List of plugins.
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-cpu'
set -g @plugin 'tmux-plugins/tmux-battery'

# Use Alt-w as the <Prefix> key.
set -g prefix M-w
bind M-w send-prefix
unbind C-b

# Set the default shell and command to use our shell in order to source things
# properly.
set -g default-shell ${SHELL}
set -g default-command ${SHELL}

# Enable 256 colors support in the default terminal.
# See https://github.com/tmux/tmux/wiki/FAQ#how-do-i-use-a-256-colour-terminal.
set -g default-terminal "screen-256color"

# Set the title of the host terminal.
set -g set-titles on
set -g set-titles-string '#S:#h:#I:#W'

# Automatically rename windows.
set -g automatic-rename on
set -g automatic-rename-format '#{b:pane_current_path}:#{pane_current_command}'

# Customize pane borders.
set -g pane-border-style fg=white,bg=default
set -g pane-active-border-style fg=green,bg=default

# Customize the status bar.
set -g status on
set -g status-position bottom
set -g status-justify centre
set -g status-interval 5
set -g status-keys vi
set -g status-style fg=white,bg=black

# Monitor activity in other windows, but don't show visual notifications.
set -g monitor-activity on
set -g visual-activity off

# Customize the left status segment.
set -g status-left-length 60
set -g status-left '#[fg=green][#[fg=red]#S#[fg=green]@#[fg=cyan]#h#[fg=green]#[fg=green]]'

# Customize the window list segment.
set -g window-status-separator '|'
set -g window-status-style fg=blue,bg=default
set -g window-status-current-style fg=brightred,bg=default
set -g window-status-activity-style fg=cyan,bg=default
set -g window-status-bell-style fg=cyan,bg=default

# Customize the right status segment.
set -g @batt_icon_status_charged 'AC'
set -g @batt_icon_status_charging 'AC+'
set -g @batt_icon_status_discharging 'BAT-'
set -g @batt_icon_status_attached 'BAT#'
set -g @batt_icon_status_unknown 'BAT?'
set -g status-right-length 50
set -g status-right ' #{battery_color_fg}#{battery_icon_status} #{battery_percentage} #[fg=white]| #{cpu_fg_color}CPU #{cpu_percentage} #[fg=white]| #{cpu_temp_fg_color}T #{cpu_temp} #[fg=white]| #{ram_fg_color}RAM #{ram_percentage} '

# Customize the command prompt.
set -g message-command-style fg=black,bg=yellow
set -g message-style fg=yellow,bg=black

# Customize highlighted text.
set -g mode-style fg=black,bg=yellow

# Enable mouse support.
set -g mouse on

# Use Vim shortcuts:
# - Alt-Enter (enter copy mode)
# - v (begin selection)
# - y (copy selection)
# - q (exit copy mode)
# - <Prefix> + p (paste selection)
set -g mode-keys vi
bind -n M-Enter copy-mode
bind -T copy-mode-vi v send -X begin-selection
bind -T copy-mode-vi y send -X copy-selection-and-cancel
bind -T copy-mode-vi q send -X cancel
bind p paste-buffer

# Enable focus events, which are needed to keep Vim's focus events working when
# running inside tmux.
set -g focus-events on

# Don't wait for an escape sequence after hitting Esc. Fixes lags involving Esc
# (including insert mode exit lag in Vim).
set -sg escape-time 0

# Index windows and panes starting at 1.
set -g base-index 1
set -g pane-base-index 1

# When we add or remove windows, renumber them in sequential order.
set -g renumber-windows on

# Control windows and panes using Alt:
# - Alt-n (open window)
# - Alt-x (close pane)
# - Alt-h/l (navigate windows)
# - Alt-Esc (close all panes except current one)
# Must not conflict with Vim tab/pane control prefix (<Leader>).
bind -n M-n new-window -c "#{pane_current_path}"
bind -n M-x kill-window
bind -n M-h previous-window
bind -n M-l next-window
bind -n M-Escape kill-pane -a

# Navigate panes using <Prefix>:
# - <Prefix> + s/v (split pane horizontally / vertically)
# - <Prefix> + h/j/k/l (navigate panes)
# - <Prefix> + w (cycle panes)
# - <Prefix> + H/J/K/L (resize pane)
# - <Prefix> + = (resize all panes equally)
# Must not conflict with Vim pane navigation prefix (<Leader>w).
bind s split-window -v -c "#{pane_current_path}"
bind v split-window -h -c "#{pane_current_path}"
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R
bind w select-pane -t :.+
bind -r H resize-pane -L "5"
bind -r J resize-pane -D "5"
bind -r K resize-pane -U "5"
bind -r L resize-pane -R "5"
bind = select-layout tiled

# Detach from the current session using Alt-d.
bind -n M-d detach

# Initialize TMUX plugin manager. Keep this line at the very bottom of
# `~/.tmux.conf`.
run '~/.tmux/plugins/tpm/tpm'
